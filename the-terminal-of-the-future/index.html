<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>the terminal of the future</title>
    
    <meta name="description" content="To redesign infrastructure, you have to allow incremental adoption, while simultaneously moving the whole design space at once.">
    
    <meta name="author" content="jyn">

    <link rel="alternate" type="application/atom+xml" title="the website of jyn" href="/atom.xml">
    <link rel="icon" type="image/x-icon" href="https://jyn.dev/favicon.jpg">
    <script src="/main.js?v=cshxqZNByYq&#x2F;QgS1UUzDewC9wa2LxgEbbhhyltch5DBSF7yvV+h0vYmB0KrhfQjY" defer></script>
    <link rel="stylesheet" href="https://jyn.dev/minima.css?v=7OannKi8WSigcMMmIJC3r8u0QjFzHN&#x2F;8YbHyvSXfBf9SM1wuge9+cUh&#x2F;cMs&#x2F;K&#x2F;3j">
</head>
<body>
      <header class="site-header" role="banner">

      <div class="wrapper">
        <a class="site-title" href="/">the website of jyn</a>

        
        
          <nav class="site-nav">
            <input type="checkbox" id="nav-trigger" class="nav-trigger" />
            <label for="nav-trigger">
              <span class="menu-icon">
                <svg viewBox="0 0 18 15" width="18px" height="15px">
                  <title>menu</title>
                  <path fill="#424242" d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.031C17.335,0,18,0.665,18,1.484L18,1.484z"/>
                  <path fill="#424242" d="M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0c0-0.82,0.665-1.484,1.484-1.484 h15.031C17.335,6.031,18,6.696,18,7.516L18,7.516z"/>
                  <path fill="#424242" d="M18,13.516C18,14.335,17.335,15,16.516,15H1.484C0.665,15,0,14.335,0,13.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.031C17.335,12.031,18,12.696,18,13.516L18,13.516z"/>
                </svg>
              </span>
            </label>

            <div class="trigger">
              
                
                
                <a class="page-link" href="&#x2F;about&#x2F;">about</a>
                
              
                
                
                <a class="page-link" href="&#x2F;liberating&#x2F;">computers should be liberating</a>
                
              
                
                
                <a class="page-link" href="&#x2F;talks&#x2F;">talks</a>
                
              
                
                
              
                <a class="page-link" href="/computer-of-the-future">the computer of the next 200 years</a>
                <!-- <a class="page-link" href="/four-posts-about-build-systems">four posts about build systems</a> -->
            </div>
          </nav>
        
      </div>
    </header>

    <main class="page-content" aria-label="Content">
      <div class="wrapper">
        
<article class="post" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
		<h1 title="To redesign infrastructure, you have to allow incremental adoption, while simultaneously moving the whole design space at once." class="post-title" itemprop="name headline">the terminal of the future</h1>
    <p class="post-meta">
      <time datetime="2025-11-11" itemprop="datePublished">
        2025-11-11
      </time>
      
      
      
        
        
      • <a href="https://jyn.dev/tags/ideas/">ideas</a>
        
      • <a href="https://jyn.dev/tags/terminal/">terminal</a>
        
      
        
    </p>
  </header>

  

	


<div class=toc-container><div class="toc-content">
	<details><summary>Table of contents</summary>
	
<ol class=toc>
	<li>
		<a href="https://jyn.dev/the-terminal-of-the-future/#a-mental-model-of-a-terminal">a mental model of a terminal</a>
		
	</li>
	<li>
		<a href="https://jyn.dev/the-terminal-of-the-future/#what-does-a-better-terminal-look-like">what does a better terminal look like?</a>
		

<ol class=toc>
	<li>
		<a href="https://jyn.dev/the-terminal-of-the-future/#a-first-try-jupyter">a first try: Jupyter</a>
		
	</li>
	<li>
		<a href="https://jyn.dev/the-terminal-of-the-future/#some-problems">some problems</a>
		
	</li>
		</ol>
	</li>
	<li>
		<a href="https://jyn.dev/the-terminal-of-the-future/#how-does-that-work">how does that work?</a>
		

<ol class=toc>
	<li>
		<a href="https://jyn.dev/the-terminal-of-the-future/#shell-integration">shell integration</a>
		
	</li>
	<li>
		<a href="https://jyn.dev/the-terminal-of-the-future/#long-lived-processes">long-lived processes</a>
		

<ol class=toc>
	<li>
		<a href="https://jyn.dev/the-terminal-of-the-future/#interacting">interacting</a>
		
	</li>
	<li>
		<a href="https://jyn.dev/the-terminal-of-the-future/#suspending">suspending</a>
		
	</li>
	<li>
		<a href="https://jyn.dev/the-terminal-of-the-future/#disconnecting">disconnecting</a>
		
	</li>
		</ol>
	</li>
	<li>
		<a href="https://jyn.dev/the-terminal-of-the-future/#rerun-and-undo-redo">rerun and undo&#x2F;redo</a>
		
	</li>
	<li>
		<a href="https://jyn.dev/the-terminal-of-the-future/#derived-features">derived features</a>
		

<ol class=toc>
	<li>
		<a href="https://jyn.dev/the-terminal-of-the-future/#needs-a-jupyter-notebook-frontend">needs a Jupyter notebook frontend</a>
		
	</li>
	<li>
		<a href="https://jyn.dev/the-terminal-of-the-future/#needs-shell-integration">needs shell integration</a>
		
	</li>
	<li>
		<a href="https://jyn.dev/the-terminal-of-the-future/#needs-sandboxed-tracing">needs sandboxed tracing</a>
		
	</li>
		</ol>
	</li>
		</ol>
	</li>
	<li>
		<a href="https://jyn.dev/the-terminal-of-the-future/#ok-but-how-do-you-build-this">ok but how do you build this</a>
		

<ol class=toc>
	<li>
		<a href="https://jyn.dev/the-terminal-of-the-future/#stage-1-transactional-semantics">stage 1: transactional semantics</a>
		
	</li>
	<li>
		<a href="https://jyn.dev/the-terminal-of-the-future/#stage-2-persistent-sessions">stage 2: persistent sessions</a>
		
	</li>
	<li>
		<a href="https://jyn.dev/the-terminal-of-the-future/#stage-3-structured-rpc">stage 3: structured RPC</a>
		
	</li>
	<li>
		<a href="https://jyn.dev/the-terminal-of-the-future/#stage-4-jupyter-like-frontend">stage 4: jupyter-like frontend</a>
		
	</li>
		</ol>
	</li>
	<li>
		<a href="https://jyn.dev/the-terminal-of-the-future/#jyn-what-the-fuck">jyn, what the fuck</a>
		
	</li>
	<li>
		<a href="https://jyn.dev/the-terminal-of-the-future/#bibliography">bibliography</a>
		
	</li>
		</ol></details></div></div>
	

  
    
    
  <p>This post is part 6 of a multi-part series called <a href="/computer-of-the-future">“the computer of the next 200 years”</a>.</p>
    
  <hr>
  

  <div class="post-content" itemprop="articleBody">
    <figure>
<blockquote cite="https://jvns.ca/blog/2025/06/24/new-zine--the-secret-rules-of-the-terminal/">
<p>Terminal internals are a mess. A lot of it is just the way it is because someone made a decision in the 80s and now it’s impossible to change.</p>
</blockquote>
<figcaption>
<cite ><a href="https://jvns.ca/blog/2025/06/24/new-zine--the-secret-rules-of-the-terminal/">Julia Evans</a></cite>
</figcaption>
</figure>
<figure>
<blockquote cite="https://www.destroyallsoftware.com/talks/a-whole-new-world">
<p>This is what you have to do to redesign infrastructure. Rich [Hickey] didn't just pile some crap on top of Lisp [when building Clojure]. He took the entire Lisp and moved the whole design at once.</p>
</blockquote>
<figcaption>
<cite ><a href="https://www.destroyallsoftware.com/talks/a-whole-new-world">Gary Bernhardt</a></cite>
</figcaption>
</figure>
<h2 id="a-mental-model-of-a-terminal">a mental model of a terminal<a class="zola-anchor" href="#a-mental-model-of-a-terminal" aria-label="Anchor link for: a-mental-model-of-a-terminal"></a>
</h2>
<p>At a very very high level, a terminal has four parts:</p>
<ol>
<li>The "<a href="https://wizardzines.com/comics/meet-the-terminal-emulator/">terminal emulator</a>", which is a program that renders a grid-like structure to your graphical display.</li>
<li>The "<a href="https://jvns.ca/blog/2022/07/20/pseudoterminals/">pseudo-terminal</a>" (PTY), which is a connection between the terminal emulator and a "process group" which receives input. This is not a program. This is a piece of state in the kernel.</li>
<li>The "shell", which is a program that leads the "process group", reads and parses input, spawns processes, and generally acts as an event loop. Most environments use <a href="https://jvns.ca/blog/2017/03/26/bash-quirks/">bash</a> as the default shell.</li>
<li>The programs spawned by your shell, which interact with all of the above in order to receive input and send output.</li>
</ol>
<p>I lied a little bit above. "input" is not just text. It also includes <a href="https://man7.org/linux/man-pages/man7/signal.7.html">signals</a> that can be sent to the running process. Converting keystrokes to signals is the job of the PTY.</p>
<p>Similar, "output" is not just text. It's a stream of <a href="https://gist.github.com/fnky/458719343aabd01cfb17a3a4f7296797">ANSI Escape Sequences</a> that can be used by the terminal emulator to display rich formatting.</p>
<h2 id="what-does-a-better-terminal-look-like">what does a better terminal look like?<a class="zola-anchor" href="#what-does-a-better-terminal-look-like" aria-label="Anchor link for: what-does-a-better-terminal-look-like"></a>
</h2>
<p>I do some <a href="https://jyn.dev/how-i-use-my-terminal/">weird things</a> with terminals. However, the amount of hacks I can get up to are pretty limited, because terminals are pretty limited. I won't go into all the ways they're limited, because it's been rehashed <a href="https://matklad.github.io/2019/11/16/a-better-shell.html">many</a> <a href="https://github.com/withoutboats/notty">times</a> <a href="https://jvns.ca/blog/2025/02/05/some-terminal-frustrations/">before</a>. What I want to do instead is imagine what a better terminal can look like.</p>
<h3 id="a-first-try-jupyter">a first try: Jupyter<a class="zola-anchor" href="#a-first-try-jupyter" aria-label="Anchor link for: a-first-try-jupyter"></a>
</h3>
<p>The closest thing to a terminal analog that most people are familiar with is <a href="https://docs.jupyter.org/en/latest/">Jupyter Notebook</a>. This offers a lot of cool features that are not possible in a "traditional" VT100 emulator:</p>
<ul>
<li>
<p>high fidelity image rendering</p>
<p><img src="/assets/jupyter%20bubble%20plot.png" alt="screenshot of a JupyterLite notebook. It has some python code in a cell that generates a matplotlib chart. Beneath is the chart, rendered to raster graphics." /></p>
</li>
<li>
<p>a "rerun from start" button (or rerun the current command; or rerun only a single past command) that replaces past output instead of appending to it</p>
<p><img src="/assets/jupyter%20run%20cells.png" alt="" /></p>
</li>
<li>
<p>"views" of source code and output that can be rewritten in place (e.g. markdown can be viewed either as source or as rendered HTML)</p>
<p><img src="/assets/jupyter%20markdown%20raw.png" alt="" /> <img src="/assets/jupyter%20markdown%20rendered.png" alt="" /></p>
</li>
<li>
<p>a built-in editor with syntax highlighting, tabs, panes, mouse support, etc.</p>
<p><img src="/assets/jupyter%20window%20management.png" alt="" /></p>
</li>
</ul>
<h3 id="some-problems">some problems<a class="zola-anchor" href="#some-problems" aria-label="Anchor link for: some-problems"></a>
</h3>
<p>Jupyter works by having a "kernel" (in this case, a python interpreter) and a "renderer" (in this case, a web application displayed by the browser). You could imagine using a Jupyter Notebook with a shell as the kernel, so that you get all the nice features of Jupyter when running shell commands. However, that quickly runs into some issues:</p>
<ul>
<li>Your shell gets the commands all at once, not character-by-character, so tab-complete, syntax highlighting, and autosuggestions don't work.</li>
<li>What do you do about long-lived processes? By default, Jupyter runs a cell until completion; you can cancel it, but you can't suspend, resume, interact with, nor view a process while it's running. Don't even think about running <code>vi</code> or <code>top</code>.</li>
<li>The "rerun cell" buttons do horrible things to the state of your computer (normal Jupyter kernels have this problem too, but "rerun all" works better when the commands don't usually include <code>rm -rf</code>).</li>
<li>Undo/redo do <em>not</em> work. (They don't work in a normal terminal either, but people attempt to use them more when it looks like they should be able to.)</li>
</ul>
<p>It turns out all these problems are solveable.</p>
<h2 id="how-does-that-work">how does that work?<a class="zola-anchor" href="#how-does-that-work" aria-label="Anchor link for: how-does-that-work"></a>
</h2>
<h3 id="shell-integration">shell integration<a class="zola-anchor" href="#shell-integration" aria-label="Anchor link for: shell-integration"></a>
</h3>
<p>There exists today a terminal called <a href="https://www.warp.dev/">Warp</a>. Warp has built native integration between the terminal and the shell, where the terminal understands where each command starts and stops, what it outputs, and what is your own input. As a result, it can render things very prettily:</p>
<p><img src="/assets/warp%20terminal.png" alt="" /></p>
<p>It does this using (mostly) standard features built-in to the terminal and shell (a custom DCS): you can read their explanation <a href="https://www.warp.dev/blog/how-warp-works#:~:text=the%20reason">here</a>. It's possible to do this less invasively using <a href="https://iterm2.com/documentation-escape-codes.html#:~:text=shell%20integration/">OSC 133 escape codes</a>; I'm not sure why Warp didn't do this, but that's ok.</p>
<p>iTerm2 does a similar thing, and this allows it to enable <a href="https://iterm2.com/documentation-shell-integration.html#:~:text=enables%20numerous%20features">really quite a lot of features</a>: navigating between commands with a single hotkey; notifying you when a command finishes running, showing the current command as an "overlay" if the output goes off the screen.</p>
<h3 id="long-lived-processes">long-lived processes<a class="zola-anchor" href="#long-lived-processes" aria-label="Anchor link for: long-lived-processes"></a>
</h3>
<p>This is really three different things. The first is <em>interacting</em> with a long-lived process. The second is <em>suspending</em> the process without killing it. The third is <em>disconnecting</em> from the process, in such a way that the process state is not disturbed and is still available if you want to reconnect.</p>
<h4 id="interacting">interacting<a class="zola-anchor" href="#interacting" aria-label="Anchor link for: interacting"></a>
</h4>
<p>To interact with a process, you need bidirectional communication, i.e. you need a "cell output" that is also an input. An example would be any TUI, like <code>top</code>, <code>gdb</code>, or <code>vim</code> <sup class="footnote-reference" id="fr-1-1"><a href="#fn-1">1</a></sup>.  Fortunately, Jupyter is really good at this!  The whole design is around having <a href="https://ipywidgets.readthedocs.io/en/latest/">interactive outputs</a> that you can change and update.</p>
<p>Additionally, I would expect my terminal to always have a "free input cell", as Matklad describes in <a href="https://matklad.github.io/2019/11/16/a-better-shell.html">A Better Shell</a>, where the interactive process runs in the top half of the window and an input cell is available in the bottom half. Jupyter can do this today, but "add a cell" is manual, not automatic.</p>
<h4 id="suspending">suspending<a class="zola-anchor" href="#suspending" aria-label="Anchor link for: suspending"></a>
</h4>
<p>"Suspending" a process is usually called "<a href="https://jvns.ca/blog/2024/07/03/reasons-to-use-job-control/">job control</a>". There's not too much to talk about here, except that I would expect a "modern" terminal to show me all suspended and background processes as a de-emphasized persistent visual, kinda like how Intellij will show you "indexing ..." in the bottom taskbar.</p>
<p><img src="/assets/intellij%20background%20tasks.png" alt="" /></p>
<h4 id="disconnecting">disconnecting<a class="zola-anchor" href="#disconnecting" aria-label="Anchor link for: disconnecting"></a>
</h4>
<p>There are roughly three existing approaches for disconnecting and reconnecting to a terminal session (Well, four if you count <a href="https://github.com/nelhage/reptyr">reptyr</a>).</p>
<ol>
<li>
<p>Tmux / Zellij / Screen</p>
<p>These tools inject a whole extra terminal emulator between your terminal emulator and the program. They work by having a "server" which actually owns the PTY and renders the output, and a "client" that displays the output to your "real" terminal emulator. This model lets you detach clients, reattach them later, or even attach multiple clients at once. You can think of this as a "batteries-included" approach. It also has the benefit that you can <a href="https://jyn.dev/how-i-use-my-terminal/">program</a> both the client and the server (although many modern terminals, like <a href="https://sw.kovidgoyal.net/kitty/">Kitty</a> and <a href="https://wezfurlong.org/wezterm/">Wezterm</a> are programmable now); that you can organize your tabs and windows in the terminal (although many modern desktop environments have tiling and thorough keyboard shortcuts); and that you get street cred for looking like Hackerman.</p>
<p><img src="/assets/hackerman.png" alt="" /></p>
<p>The downside is that, well, now you have an extra terminal emulator running in your terminal, with <a href="https://sw.kovidgoyal.net/kitty/faq/#i-am-using-tmux-zellij-and-have-a-problem">all the bugs that implies</a>.</p>
<p>iTerm actually avoids this by <a href="https://iterm2.com/documentation-tmux-integration.html">bypassing the tmux client altogether and acting as its own client</a> that talks directly to the server. In this mode, "tmux tabs" are actually iTerm tabs, "tmux panes" are iTerm panes, and so on. This is a good model, and I would adopt it when writing a future terminal for integration with existing tmux setups.</p>
</li>
<li>
<p><a href="https://mosh.org/">Mosh</a></p>
<p>Mosh is a really interesting place in the design space. It is not a terminal emulator replacement; instead it is an <em>ssh</em> replacement. Its big draw is that it supports reconnecting to your terminal session after a network interruption. It does that by <a href="https://mosh.org/#:~:text=how%20mosh%20works">running a state machine on the server and replaying an incremental diff of the viewport to the client</a>. This is a similar model to tmux, except that it doesn't support the "multiplexing" part (it expects your terminal emulator to handle that), nor scrollback (ditto). Because it has its own renderer, it has <a href="https://github.com/mobile-shell/mosh/issues/234">a similar class of bugs to tmux</a>. One feature it <em>does</em> have, unlike tmux, is that the "client" is really running on your side of the network, so local line editing is instant.</p>
</li>
<li>
<p><a href="https://ansuz.sooke.bc.ca/entry/389">alden</a>/<a href="https://github.com/shell-pool/shpool">shpool</a>/<a href="https://github.com/crigler/dtach">dtach</a>/<a href="https://github.com/martanne/abduco">abduco</a>/<a href="https://github.com/yazgoo/diss">diss</a></p>
<p>These all occupy a similar place in the design space: they <em>only</em> handle session detach/resume with a client/server, not networking or scrollback, and do not include their own terminal emulator. Compared to tmux and mosh, they are highly decoupled.</p>
</li>
</ol>
<h3 id="rerun-and-undo-redo">rerun and undo/redo<a class="zola-anchor" href="#rerun-and-undo-redo" aria-label="Anchor link for: rerun-and-undo-redo"></a>
</h3>
<p>I'm going to treat these together because the solution is the same: dataflow tracking.</p>
<p>Take as an example <a href="https://plutojl.org/">pluto.jl</a>, which does this <em>today</em> by hooking into the Julia compiler.</p>
<p><img src="/assets/pluto%20interactive%20ode.gif" alt="" /></p>
<p>Note that this updates cells live in response to previous cells that they depend on. Not pictured is that it <em>doesn't</em> update cells if their dependencies haven't changed. You can think of this as a spreadsheet-like Jupyter, where code is only rerun when necessary.</p>
<p>You may say this is hard to generalize. The trick here is <a href="https://jyn.dev/complected-and-orthogonal-persistence/#how-far-can-we-take-this">orthogonal persistence</a>. If you sandbox the processes, track all IO, and prevent things that are "too weird" unless they're talking to other processes in the sandbox (e.g. unix sockets and POST requests), you have really quite a lot of control over the process! This lets you treat it as a pure function of its inputs, where its inputs are "the whole file system, all environment variables, and all process attributes".</p>
<h3 id="derived-features">derived features<a class="zola-anchor" href="#derived-features" aria-label="Anchor link for: derived-features"></a>
</h3>
<p>Once you have these primitives—Jupyter notebook frontends, undo/redo, automatic rerun, persistence, and shell integration—you can build really quite a lot on top. And you can build it incrementally, piece-by-piece:</p>
<h4 id="needs-a-jupyter-notebook-frontend">needs a Jupyter notebook frontend<a class="zola-anchor" href="#needs-a-jupyter-notebook-frontend" aria-label="Anchor link for: needs-a-jupyter-notebook-frontend"></a>
</h4>
<ul>
<li><a href="https://blog.atuin.sh/atuin-desktop-runbooks-that-run/">Runbooks</a> (actually, you can build these just with Jupyter and a PTY primitive).</li>
<li>Terminal customization that uses normal CSS, no weird custom languages or ANSI color codes.</li>
<li>Search for commands by output/timestamp. Currently, you can search across output in the current session, or you can search across all command input history, but you don't have any kind of smart filters, and the output doesn't persist across sessions.</li>
</ul>
<h4 id="needs-shell-integration">needs shell integration<a class="zola-anchor" href="#needs-shell-integration" aria-label="Anchor link for: needs-shell-integration"></a>
</h4>
<ul>
<li>Timestamps and execution duration for each command.</li>
<li>Local line-editing, even across a network boundary.</li>
<li><a href="https://docs.warp.dev/terminal/command-completions/completions">IntelliSense for shell commands</a>, without having to hit tab and with rendering that's integrated into the terminal.</li>
</ul>
<h4 id="needs-sandboxed-tracing">needs sandboxed tracing<a class="zola-anchor" href="#needs-sandboxed-tracing" aria-label="Anchor link for: needs-sandboxed-tracing"></a>
</h4>
<ul>
<li>"<a href="https://jyn.dev/complected-and-orthogonal-persistence/#but-why">All the features from sandboxed tracing</a>": collaborative terminals, querying files modified by a command, "asciinema but you can edit it at runtime", tracing build systems.</li>
<li>Extend the smart search above to also search by disk state at the time the command was run.</li>
<li>Extending undo/redo to a git-like branching model (something like this is already support by <a href="https://elpa.gnu.org/packages/undo-tree.html#:~:text=undo%20systems">emacs undo-tree</a>), where you have multiple "views" of the process tree.</li>
<li>Given the undo-tree model, and since we have sandboxing, we can give an LLM access to your project, and run many of them in parallel at the same time without overwriting each others state, and in such a way that you can see what they're doing, edit it, and save it into a runbook for later use.</li>
<li>A terminal in a prod environment that can't affect the state of the machine, only inspect the existing state.</li>
</ul>
<h2 id="ok-but-how-do-you-build-this">ok but how do you build this<a class="zola-anchor" href="#ok-but-how-do-you-build-this" aria-label="Anchor link for: ok-but-how-do-you-build-this"></a>
</h2>
<p>jyn, you may say, <a href="https://becca.ooo/blog/vertical-integration/">you can't build vertical integration in open source</a>. <a href="https://tech.lgbt/@jyn/112187088917827279">you can't make money off open source projects</a>. <a href="https://jyn.dev/you-are-in-a-box/#switching-costs-and-growth">the switching costs are too high</a>.</p>
<p>All these things are true. To talk about how this is possible, we have to talk about incremental adoption.</p>
<p>if I were building this, I would do it in stages, such that at each stage the thing is an improvement over its alternatives. This is how <code>jj</code> works and it works extremely well: it doesn't require everyone on a team to switch at once because individual people can use <code>jj</code>, even for single commands, without a large impact on everyone else.</p>
<h3 id="stage-1-transactional-semantics">stage 1: transactional semantics<a class="zola-anchor" href="#stage-1-transactional-semantics" aria-label="Anchor link for: stage-1-transactional-semantics"></a>
</h3>
<p>When people think of redesigning the terminal, they always think of redesigning the terminal <em>emulator</em>. This is exactly the wrong place to start. People are attached to their emulators. They configure them, they make them look nice, they use their keybindings. There is a high switching cost to switching emulators because <a href="https://jvns.ca/blog/2025/01/11/getting-a-modern-terminal-setup/#everything-affects-everything-else">everything affects everything else</a>. It's not <em>so</em> terribly high, because it's still individual and not shared across a team, but still high.</p>
<p>What I would do instead is start at the CLI layer. CLI programs are great because they're easy to install and run and have very low switching costs: you can use them one-off without changing your whole workflow.</p>
<p>So, I would write a CLI that implements <a href="https://jyn.dev/complected-and-orthogonal-persistence/#how-far-can-we-take-this">transactional semantics for the terminal</a>. You can imagine an interface something like <code>transaction [start|rollback|commit]</code>, where everything run after <code>start</code> is undoable. There is a <em>lot</em> you can do with this alone, I think you could build a whole business off this.</p>
<h3 id="stage-2-persistent-sessions">stage 2: persistent sessions<a class="zola-anchor" href="#stage-2-persistent-sessions" aria-label="Anchor link for: stage-2-persistent-sessions"></a>
</h3>
<p>Once I had transactional semantics, I would try to decouple persistence from tmux and mosh.</p>
<p>To get PTY persistence, you have to introduce a client/server model, because the kernel <em>really really</em> <a href="https://en.wikipedia.org/wiki/SIGHUP">expects</a> both sides of a PTY to always be connected. Using commands like <a href="https://ansuz.sooke.bc.ca/entry/389">alden</a>, or a library like it (it's not <em>that</em> complicated), lets you do this simply, without affecting the terminal emulator nor the programs running inside the PTY session.</p>
<p>To get scrollback, the server could save input and output indefinitely and replay them when the client reconnects. This gets you "native" scrollback—the terminal emulator you're already using handles it exactly like any other output, because it looks exactly like any other output—while still being replayable and resumable from an arbitrary starting point. This requires some amount of parsing ANSI escape codes<sup class="footnote-reference" id="fr-2-1"><a href="#fn-2">2</a></sup>, but it's doable with enough work.</p>
<p>To get network resumption like mosh, my custom server could use <a href="https://eternalterminal.dev/howitworks/">Eternal TCP</a> (possibly built on top of QUIC for efficiency). Notably, the persistence for the PTY is separate from the persistence for the network connection. Eternal TCP here is strictly an optimization: you could build this on top of a bash script that runs <code>ssh host eternal-pty attach</code> in a loop, it's just not as nice an experience because of network delay and packet loss. Again, composable parts allow for incremental adoption.</p>
<p>At this point, you're already able to connect multiple clients to a single terminal session, like tmux, but window management is still done by your terminal emulator, not by the client/server. If you wanted to have window management integrated, the terminal emulator could speak the tmux -CC protocol, like iTerm.</p>
<p>All parts of this stage can be done independently and in parallel from the transactional semantics, but I don't think you can build a business off them, it's not enough of an improvement over the existing tools.</p>
<h3 id="stage-3-structured-rpc">stage 3: structured RPC<a class="zola-anchor" href="#stage-3-structured-rpc" aria-label="Anchor link for: stage-3-structured-rpc"></a>
</h3>
<p>This bit depends on the client/server model. Once you have a server interposed between the terminal emulator and the client, you can start doing really funny things like tagging I/O with metadata. This lets all data be timestamped<sup class="footnote-reference" id="fr-3-1"><a href="#fn-3">3</a></sup> and lets you distinguish input from output. <a href="https://jvns.ca/blog/2022/07/20/pseudoterminals/">xterm.js</a> works something like this. When combined with shell integration, this even lets you distinguish shell prompts from program output, at the <em>data</em> layer.</p>
<p>Now you can start doing really funny things, because you have a <em>structured log</em> of your terminal session. You can replay the log as a recording, like <a href="https://asciinema.org/">asciinema</a><sup class="footnote-reference" id="fr-4-1"><a href="#fn-4">4</a></sup>; you can transform the shell prompt without rerunning all the commands; you can import it into a Jupyter Notebook or <a href="https://blog.atuin.sh/atuin-desktop-runbooks-that-run/">Atuin Desktop</a>; you can save the commands and rerun them later as a script. Your terminal is data.</p>
<h3 id="stage-4-jupyter-like-frontend">stage 4: jupyter-like frontend<a class="zola-anchor" href="#stage-4-jupyter-like-frontend" aria-label="Anchor link for: stage-4-jupyter-like-frontend"></a>
</h3>
<p>This is the very first time that we touch the terminal emulator, and it's intentionally the last step because it has the highest switching costs. This makes use of all the nice features we've built to give you a nice UI. You don't need our <code>transaction</code> CLI anymore unless you want nested transactions, because your whole terminal session starts in a transaction by default. You get all the features I mention <a href="https://jyn.dev/the-terminal-of-the-future/#derived-features">above</a>, because we've put all the pieces together.</p>
<h2 id="jyn-what-the-fuck">jyn, what the fuck<a class="zola-anchor" href="#jyn-what-the-fuck" aria-label="Anchor link for: jyn-what-the-fuck"></a>
</h2>
<p>This is bold and ambitious and I think building the whole thing would take about a decade. That's ok. I'm patient.</p>
<p>You can help me by spreading the word :) Perhaps this post will inspire someone to start building this themselves.</p>
<hr />
<h2 id="bibliography">bibliography<a class="zola-anchor" href="#bibliography" aria-label="Anchor link for: bibliography"></a>
</h2>
<ul>
<li><a href="https://www.destroyallsoftware.com/talks/a-whole-new-world">Gary Bernhardt, “A Whole New World”</a></li>
<li><a href="https://matklad.github.io/2019/11/16/a-better-shell.html">Alex Kladov, “A Better Shell”</a></li>
<li><a href="https://jyn.dev/how-i-use-my-terminal/">jyn, “how i use my terminal”</a></li>
<li><a href="https://jyn.dev/complected-and-orthogonal-persistence/">jyn, “Complected and Orthogonal Persistence”</a></li>
<li><a href="https://jyn.dev/you-are-in-a-box/">jyn, “you are in a box”</a></li>
<li><a href="https://tech.lgbt/@jyn/112187088917827279">jyn, “there's two costs to making money off an open source project…”</a></li>
<li><a href="https://becca.ooo/blog/vertical-integration/">Rebecca Turner, “Vertical Integration is the Only Thing That Matters”</a></li>
<li><a href="https://jvns.ca/blog/2025/06/24/new-zine--the-secret-rules-of-the-terminal/">Julia Evans, “New zine: The Secret Rules of the Terminal”</a></li>
<li><a href="https://wizardzines.com/comics/meet-the-terminal-emulator/">Julia Evans, “meet the terminal emulator”</a></li>
<li><a href="https://jvns.ca/blog/2022/07/20/pseudoterminals/">Julia Evans, “What happens when you press a key in your terminal?”</a></li>
<li><a href="https://jvns.ca/blog/2025/01/11/getting-a-modern-terminal-setup/">Julia Evans, “What's involved in getting a "modern" terminal setup?”</a></li>
<li><a href="https://jvns.ca/blog/2017/03/26/bash-quirks/">Julia Evans, “Bash scripting quirks &amp; safety tips”</a></li>
<li><a href="https://jvns.ca/blog/2025/02/05/some-terminal-frustrations/">Julia Evans, “Some terminal frustrations”</a></li>
<li><a href="https://jvns.ca/blog/2024/07/03/reasons-to-use-job-control/">Julia Evans, “Reasons to use your shell's job control”</a></li>
<li><a href="https://man7.org/linux/man-pages/man7/signal.7.html">“signal(7) - Miscellaneous Information Manual”</a></li>
<li><a href="https://gist.github.com/fnky/458719343aabd01cfb17a3a4f7296797">Christian Petersen, “ANSI Escape Codes”</a></li>
<li><a href="https://github.com/withoutboats/notty">saoirse, “withoutboats/notty: A new kind of terminal”</a></li>
<li><a href="https://docs.jupyter.org/en/latest/">Jupyter Team, “Project Jupyter Documentation”</a></li>
<li><a href="https://www.warp.dev/">“Warp: The Agentic Development Environment”</a></li>
<li><a href="https://www.warp.dev/blog/how-warp-works">“Warp: How Warp Works”</a></li>
<li><a href="https://docs.warp.dev/terminal/command-completions/completions">“Warp: Completions”</a></li>
<li><a href="https://iterm2.com/documentation-escape-codes.html">George Nachman, “iTerm2: Proprietary Escape Codes”</a></li>
<li><a href="https://iterm2.com/documentation-shell-integration.html">George Nachman, “iTerm2: Shell Integration”</a></li>
<li><a href="https://iterm2.com/documentation-tmux-integration.html">George Nachman, “iTerm2: tmux Integration”</a></li>
<li><a href="https://ipywidgets.readthedocs.io/en/latest/">Project Jupyter, “Jupyter Widgets”</a></li>
<li><a href="https://github.com/nelhage/reptyr">Nelson Elhage, “nelhage/reptyr: Reparent a running program to a new terminal”</a></li>
<li><a href="https://sw.kovidgoyal.net/kitty/">Kovid Goyal, “kitty”</a></li>
<li><a href="https://sw.kovidgoyal.net/kitty/faq/">Kovid Goyal, “kitty - Frequently Asked Questions”</a></li>
<li><a href="https://wezfurlong.org/wezterm/">Wez Furlong, “Wezterm”</a></li>
<li><a href="https://mosh.org/">Keith Winstein, “Mosh: the mobile shell”</a></li>
<li><a href="https://github.com/mobile-shell/mosh/issues/234">Keith Winstein, “Display errors with certain characters</a></li>
<li><a href="https://ansuz.sooke.bc.ca/entry/389">Matthew Skala, “alden: detachable terminal sessions without breaking scrollback”</a></li>
<li><a href="https://github.com/shell-pool/shpool">Ethan Pailes, “shell-pool/shpool: Think tmux, then aim... lower”</a></li>
<li><a href="https://github.com/crigler/dtach">Ned T. Crigler, “crigler/dtach: A simple program that emulates the detach feature of screen”</a></li>
<li><a href="https://github.com/martanne/abduco">Marc André Tanner, “martanne/abduco: abduco provides session management”</a></li>
<li><a href="https://github.com/yazgoo/diss">yazgoo, “yazgoo/diss: dtach-like program / crate in rust”</a></li>
<li><a href="https://plutojl.org/">Fons van der Plas, “Pluto.jl — interactive Julia programming environment”</a></li>
<li><a href="https://blog.atuin.sh/atuin-desktop-runbooks-that-run/">Ellie Huxtable, “Atuin Desktop: Runbooks that Run”</a></li>
<li><a href="https://elpa.gnu.org/packages/undo-tree.html">Toby Cubitt, “undo-tree”</a></li>
<li><a href="https://en.wikipedia.org/wiki/SIGHUP">“SIGHUP - Wikipedia”</a></li>
<li><a href="https://eternalterminal.dev/howitworks/">Jason Gauci, “How Eternal Terminal Works”</a></li>
<li><a href="https://asciinema.org/">Marcin Kulik, “Record and share your terminal sessions, the simple way - asciinema.org”</a></li>
<li><a href="https://ratatui.rs/concepts/backends/alternate-screen/">“Alternate Screen | Ratatui”</a></li>
</ul>
<!--To talk about interacting with a process, we have to talk about [PTTYs](https://jvns.ca/blog/2022/07/20/pseudoterminals/).-->
<!--
My complaint about Warp is chiefly that they didn't think big enough. Warp built a very cool tool, and then wrapped it in a product that mostly exists to make it easier to use LLMs in the terminal. There are [*so many* things](https://iterm2.com/documentation-shell-integration.html#:~:text=enables%20numerous%20features) you could do with shell integration, and they don't seem to have done very many of them.
-->
<section class="footnotes">
<ol class="footnotes-list">
<li id="fn-1">
<p>there are a <em>lot</em> of complications here around <a href="https://ratatui.rs/concepts/backends/alternate-screen/">alternate mode</a>, but I'm just going to skip over those for now. A simple way to handle alternate mode (that doesn't get you nice things) is just to embed a raw terminal in the output cell. <a href="#fr-1-1">↩</a></p>
</li>
<li id="fn-2">
<p>otherwise you could start replaying output from inside an escape, which is <a href="https://mosh.org/#:~:text=evil%20escape%20sequences">not good</a>. I had a detailed email exchange about this with the alden author which I have not yet had time to write up into a blog post; most of the complication comes when you want to avoid replaying the <em>entire</em> history and only want to replay the visible viewport. <a href="#fr-2-1">↩</a></p>
</li>
<li id="fn-3">
<p>hey, this seems awfully like <a href="https://asciinema.org/">asciinema</a>! <a href="#fr-3-1">↩</a></p>
</li>
<li id="fn-4">
<p>oh, that's why it seemed like asciinema. <a href="#fr-4-1">↩</a></p>
</li>
</ol>
</section>

  </div>
</article>
<hr>
  
  
  
  
  
  
  
  
    
    
  
  
    
    
  
<small>Discuss on
    <a href="https:&#x2F;&#x2F;hn.algolia.com&#x2F;?query=jyn.dev&#x2F;the-terminal-of-the-future&#x2F;&amp;type=story">Hacker News</a>,
    
    <a href="https:&#x2F;&#x2F;lobste.rs&#x2F;stories&#x2F;url&#x2F;latest?url=https:&#x2F;&#x2F;jyn.dev&#x2F;the-terminal-of-the-future&#x2F;">Lobste.rs</a>,
    
    <a href="https:&#x2F;&#x2F;social.jvns.ca&#x2F;@b0rk&#x2F;115534063787288626">Mastodon</a>, or
    <a href="https:&#x2F;&#x2F;bsky.app&#x2F;profile&#x2F;jyn.dev&#x2F;post&#x2F;3m5ewy5lq3k2h">Bluesky</a></small>

      </div>
    </main>

    <footer class="site-footer">

  <div class="wrapper">

    <div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <h2 class="footer-heading"><a href="https://jyn.dev">the website of jyn</a></h2>

        <ul class="contact-list">
            
            <li><a href="mailto:blog@jyn.dev">blog@jyn.dev</a></li>
            
            
            <li><a href="https://jyn.dev/assets/Resume.pdf">Resume</a>

        </ul>
      </div>

      <div class="footer-col footer-col-2">
        <a type="application/atom+xml" href="/atom.xml"><img width="16px" class="icon" src="/assets/rss.png"> Subscribe via RSS</a>

        <ul class="social-media-list">
          
          <li>
            <a href="https://github.com/jyn514"><span class="icon icon--github"><svg role="img" aria-label="github logo" viewBox="0 0 16 16" width="16px" height="16px"><title>github logo</title><path fill="#828282" d="M7.999,0.431c-4.285,0-7.76,3.474-7.76,7.761 c0,3.428,2.223,6.337,5.307,7.363c0.388,0.071,0.53-0.168,0.53-0.374c0-0.184-0.007-0.672-0.01-1.32 c-2.159,0.469-2.614-1.04-2.614-1.04c-0.353-0.896-0.862-1.135-0.862-1.135c-0.705-0.481,0.053-0.472,0.053-0.472 c0.779,0.055,1.189,0.8,1.189,0.8c0.692,1.186,1.816,0.843,2.258,0.645c0.071-0.502,0.271-0.843,0.493-1.037 C4.86,11.425,3.049,10.76,3.049,7.786c0-0.847,0.302-1.54,0.799-2.082C3.768,5.507,3.501,4.718,3.924,3.65 c0,0,0.652-0.209,2.134,0.796C6.677,4.273,7.34,4.187,8,4.184c0.659,0.003,1.323,0.089,1.943,0.261 c1.482-1.004,2.132-0.796,2.132-0.796c0.423,1.068,0.157,1.857,0.077,2.054c0.497,0.542,0.798,1.235,0.798,2.082 c0,2.981-1.814,3.637-3.543,3.829c0.279,0.24,0.527,0.713,0.527,1.437c0,1.037-0.01,1.874-0.01,2.129 c0,0.208,0.14,0.449,0.534,0.373c3.081-1.028,5.302-3.935,5.302-7.362C15.76,3.906,12.285,0.431,7.999,0.431z"/></svg>
</span><span class="username">jyn514</span></a>
          </li>
          

          

          

          
          <li>
            <a href="https://www.linkedin.com/in/jynelson514">
              <span class="icon icon--linkedin"><?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!-- Created with Inkscape (http://www.inkscape.org/) -->

<svg
   xmlns:dc="http://purl.org/dc/elements/1.1/"
   xmlns:cc="http://creativecommons.org/ns#"
   xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
   xmlns:svg="http://www.w3.org/2000/svg"
   xmlns="http://www.w3.org/2000/svg"
   xmlns:xlink="http://www.w3.org/1999/xlink"
   xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"
   xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"
   version="1.1"
   role="img"
   aria-label="LinkedIn logo"
   width="16"
   height="16"
   viewBox="0 0 16 16"
   sodipodi:docname="icon-linkedin.svg"
   inkscape:version="0.92.1 r15371">
  <title>LinkedIn logo</title>
  <metadata>
    <rdf:RDF>
      <cc:Work
         rdf:about="">
        <dc:format>image/svg+xml</dc:format>
        <dc:type
           rdf:resource="http://purl.org/dc/dcmitype/StillImage" />
        <dc:title>LinkedIn logo</dc:title>
        <cc:license
           rdf:resource="http://creativecommons.org/licenses/by-sa/4.0/" />
      </cc:Work>
      <cc:License
         rdf:about="http://creativecommons.org/licenses/by-sa/4.0/">
        <cc:permits
           rdf:resource="http://creativecommons.org/ns#Reproduction" />
        <cc:permits
           rdf:resource="http://creativecommons.org/ns#Distribution" />
        <cc:requires
           rdf:resource="http://creativecommons.org/ns#Notice" />
        <cc:requires
           rdf:resource="http://creativecommons.org/ns#Attribution" />
        <cc:permits
           rdf:resource="http://creativecommons.org/ns#DerivativeWorks" />
        <cc:requires
           rdf:resource="http://creativecommons.org/ns#ShareAlike" />
      </cc:License>
    </rdf:RDF>
  </metadata>
  <sodipodi:namedview
     pagecolor="#ffffff"
     bordercolor="#666666"
     borderopacity="1"
     objecttolerance="10"
     gridtolerance="10"
     guidetolerance="10"
     inkscape:pageopacity="0"
     inkscape:pageshadow="2"
     inkscape:window-width="667"
     inkscape:window-height="429"
     showgrid="false"
     inkscape:zoom="4"
     inkscape:cx="1.6884357e-08"
     inkscape:cy="-8"
     inkscape:window-x="182"
     inkscape:window-y="326"
     inkscape:window-maximized="0"
     inkscape:current-layer="svg2" />
  <image
     width="16"
     height="16"
     preserveAspectRatio="none"
     style="image-rendering:optimizeQuality"
     xlink:href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAABHNCSVQICAgIfAhkiAAAAydJREFU eJztmz9MGlEcx7/vghY6gJbBQEmKJl3aREgYbKJGhk6dTIhjUybHykQ76tYwMbsUJ4emqUPbyQET GRxIpUnbgQTP5CJxwEMHz3/xdbiYatJ67+jJ78HdZ4T33n3f53jv3nvhGAAg/zEGDBYANgPGouhn ON8D+AZwlkchozGz8/dqYOwBdbauwnkLOE0qwGDBdZ0HAMbCwGBBAViaOgsdbEYBYxHqGGQwFlWo M1DjCaAOQI3rBfhECw4FBpCbjCM3NYqQ36x2eHKB4uYOihUVbeP8zkLeJQxvvnCrQkOBAZTnJ5CI BP/6fa15hPTyVk9KsBwCVp0HgEQkiPL8BIYCA46G6waWAnKT8Vs7f0UiEkRuMu5Epq5iLWBqVLgx O2VlwVLA1YQnQsjv67lh4PhjsNcmQksBhycXwo3ZKSsLlgKKmzvCjdkpKwvWAioqas0jy4ZqzSMU K6oTmbqKpYC2cY708tatEvp6IQT8kbC0Xr8xzg9PLrC0Xu/ZzgOCS+F+xvW7QdcLEF/mEZAeCyOb eoj48H3MjJkH17u6AVU3oOrHKDcOsPZz/7/mH6E5gL97IdbY268d179eNxkNojQ3LrQJA4CVqobF 9TpU3RAqfx3phkA2FcO311PCnQeAV6kYthemMft0xPb1pBKQTcXwfm68o7ohvw+fXqaQjIqLAyQS kB4Ld9z565Tnn9nakUojoORA5wHzl2DnYEYaAY+GA461ZedgRhoBThLy+4QnxL4UAJhzighSLoQ2 GgcoVnaw9mMfgHkyPftkBIvPHwsPlaTgY1Q6AStVDdkP32981jbOUapqKDda2F6YFjqnFH0cSjUE dnUDuc+//vm9qhsoVTWhtkQPc6USILKuvxoWTiGVgHKj1fVrSiWgbVifKqv6saPXlEqACJ3s+G5D KgFO310RJBPg7N0VQSoBFHgCqANQ4wmgDkCNJ4A6ADWeAOoA1HgCqANQ4wmgDkCN6wV4f5GhDkCN J4A6ADWK+S6tS+F8TzFfJHYrfEMBzvLg/IA6StfhvAWc5RUUMhpwmgC/XAXnTepcdw7nTfDLVeA0 iUJG+w1B+v3Clyog6wAAAABJRU5ErkJggg== "
     id="image10"
     x="0"
     y="0" />
</svg>
</span>
              <span class="username">jynelson514</span>
            </a>
          </li>
          

        </ul>
      </div>

      <div class="footer-col footer-col-3">
        <p>To redesign infrastructure, you have to allow incremental adoption, while simultaneously moving the whole design space at once.</p>
      </div>
    </div>

  </div>

</footer>

</body>
</html>
